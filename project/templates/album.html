{% extends "base_panel.html" %}
{% block title %}Album {{album.name}}{% endblock %}
{% block panelTitle %}{{album.name}}{% endblock %}
{% block contentPanel %}
<form class="form-inline" role="form" action="/albums/{{album.guid}}/modify" method="post">{% csrf_token %}
    <div class="form-group">
        <input type="text" class="form-control" placeholder="New name" id="name" name="name" required/>
    </div>
    <button type="submit" class="btn btn-default">Change</button>
</form>
            
<table style="text-align: center;" class="table table-hover">
    <tr>
        <th style="text-align: center;">Photo</th>
        <th style="text-align: center;">Id</th>
    </tr>
    {% for photo in photos %}
        <tr>
            <td>
                <a href="{{photo.link}}">{{photo.description}}</a>
            </td>
            <td>
                {{photo.pk}}
            </td>
            {% if editable %}
            <td>
                <form class="form-inline" role="form" action="/albums/{{album.guid}}/{{curr}}/{{photo.pk}}/modify" method="post">{% csrf_token %}
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Description" name="description">                                                                     
                    </div>
                    <div class="form-group">
                            <input type="text" class="form-control" placeholder="Link" name="link">
                    </div>
                    <button type="submit" class="btn btn-default">Modify</button>
                </form>
            </td>
            {% endif %}
        </tr>
    {% endfor %}
</table>
{% if editable %}
    <form action="/albums/{{album.guid}}/" method="post">{% csrf_token %}
        <button id="newslide" type="submit" class="btn btn-default"><span class="glyphicon glyphicon-plus icons-padding"></span> New slide</button>
    </form>
    {% if prev or next %}
    <form action="/albums/{{album.guid}}/{{curr}}/delete" method="post">{% csrf_token %}
        <button id="deletebutton" type="submit" class="btn btn-danger"><span class="glyphicon glyphicon-remove icons-padding"></span> Delete slide</button>
    </form>
    {% endif %}
{% endif %}

<div class="text-center">
    <ul class="pagination">
        <li class="{% if not prev %}disabled{% endif %}"><a href="{% if prev %}{% url 'slideitem' album_id=album.guid slide_id=prev %}{% else %}#{% endif %}"><span class="glyphicon glyphicon-chevron-left icons-padding"></span></a></li>

        {% ifnotequal paginators.0 1 %}
        <li><a href="{% url 'slideitem' album_id=album.guid slide_id=1 %}">1</a></li>
        {% ifnotequal paginators.0|add:"-1" 1 %}
        <li class="disabled"><a href="#">...</a></li>
        {% endifnotequal %}
        {% endifnotequal %}

        {% for paginator in paginators %}
        <li class="{% ifequal paginator curr %}active{%endifequal%}"><a href="{% url 'slideitem' album_id=album.guid slide_id=paginator %}">{{paginator}}</a></li>
        {% endfor %}

        {% ifnotequal paginators|last max %}
        {% ifnotequal paginators|last|add:"1" max %}
        <li class="disabled"><a href="#">...</a></li>
        {% endifnotequal %}
        <li><a href="{% url 'slideitem' album_id=album.guid slide_id=max %}">{{max}}</a></li>
        {% endifnotequal %}

        <li class="{% if not next %}disabled{% endif %}"><a href="{% if next %}{% url 'slideitem' album_id=album.guid slide_id=next %}{% else %}#{% endif %}"><span class="glyphicon glyphicon-chevron-right icons-padding"></span></a></li>
    </ul>
</div>

{% if prev %}
    {% if editable %}
    <form action="/albums/{{album.guid}}/{{curr}}/modify" method="post">{% csrf_token %}
        <input type='hidden' name='order' value='{{prev}}' />
        <input type='hidden' name='template' value='1' />
        <button id="deletebutton" type="submit" class="btn btn-default">Move prev</button>
    </form>
    {% endif %}
{% endif %}
{% if next %}
    {% if editable %}
    <form action="/albums/{{album.guid}}/{{curr}}/modify" method="post">{% csrf_token %}
        <input type='hidden' name='order' value='{{next}}' />
        <input type='hidden' name='template' value='1' />
        <button id="deletebutton" type="submit" class="btn btn-default">Move next</button>
    </form>
    {% endif %}
{% endif %}
{% endblock %}